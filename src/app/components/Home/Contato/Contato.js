import "./style.scss";
import { useForm } from "react-hook-form";
import { useState, useRef } from "react";
import emailjs from "emailjs-com";
import { AlertColors } from "../AlertColors";
const Contato = ({ data, dataForm }) => {
  const {
    register,
    handleSubmit,
    watch,
    formState: { errors },
  } = useForm();

  const [isSuccess, setIsSuccess] = useState(false);
  const form = useRef();
  const onSubmit = (value) => {
    console.log(form.current);
    emailjs
      .sendForm(
        "service_mqzb30w",
        "template_qvp80rs",
        form.current,
        "4Uw6beMwHYhllmMdd"
      )
      .then(
        (result) => {
          console.log("SUCCESS!", result.status, result.text);
          setIsSuccess(true); 
        },
        (error) => {
          console.log(error.text);
        }
      );

  };

  return (
    <section className="sec-contato mb-9">
      <div className="container">
        <div className="sec-contato-header w-full pb-14">
          <h2 className="content-title-h2 text-gray-200 uppercase pb-4  border-gray-700 border-b">
            {data?.titulo}
          </h2>
        </div>
        <div className="sec-contato-body flex justify-between">
          <div className="w-2/6">
            <div dangerouslySetInnerHTML={{ __html: data?.texto }}></div>
            <div className="social-media flex flex-wrap gap-6 items-center mt-8">
              <AlertColors/>
              {data?.whatsapp && (
                <a
                  href={data?.whatsapp}
                  className="social-media-icon flex items-center gap-2"
                >
                  <svg
                    width="34"
                    height="34"
                    viewBox="0 0 34 34"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M16.9999 3.66659C14.6494 3.66606 12.3405 4.28694 10.3072 5.46629C8.27389 6.64564 6.58852 8.34155 5.42186 10.3821C4.2552 12.4227 3.64873 14.7355 3.6639 17.086C3.67908 19.4365 4.31536 21.7412 5.50827 23.7666L6.4566 24.9633L5.29493 28.8949L9.1616 27.8149L9.79327 28.2199C11.5365 29.3391 13.5165 30.0367 15.5763 30.2574C17.6361 30.4781 19.719 30.2158 21.6597 29.4913C23.6005 28.7668 25.3457 27.6 26.7571 26.0836C28.1684 24.5671 29.2069 22.7427 29.7903 20.755C30.3738 18.7673 30.486 16.6709 30.1181 14.6323C29.7503 12.5936 28.9125 10.6687 27.6711 9.01028C26.4298 7.35181 24.8191 6.0054 22.9668 5.07784C21.1145 4.15028 19.0715 3.66709 16.9999 3.66659ZM0.333267 16.9999C0.333267 7.79492 7.79494 0.333252 16.9999 0.333252C26.2049 0.333252 33.6666 7.79492 33.6666 16.9999C33.6666 26.2049 26.2049 33.6666 16.9999 33.6666C14.0638 33.6708 11.179 32.8961 8.63993 31.4216L0.393267 33.7249L2.76993 25.6766L2.75993 25.6649L2.70493 25.5732C1.14915 22.9844 0.329155 20.0202 0.333267 16.9999Z"
                      fill="#DEDEDE"
                    />
                    <path
                      d="M24.8915 19.4867C24.8282 19.4567 22.3965 18.26 21.9648 18.1034C21.7847 18.0289 21.5929 17.9866 21.3982 17.9784C21.0715 17.9784 20.7948 18.1417 20.5815 18.4634C20.3382 18.825 19.6032 19.6834 19.3765 19.94C19.3465 19.9734 19.3065 20.015 19.2815 20.015C19.2598 20.015 18.8832 19.86 18.7698 19.81C16.1632 18.6767 14.1848 15.955 13.9132 15.495C13.8748 15.4284 13.8732 15.4 13.8732 15.4C13.8815 15.365 13.9698 15.2767 14.0148 15.2317C14.1482 15.1 14.2915 14.9284 14.4298 14.76L14.6248 14.5267C14.8265 14.2934 14.9165 14.11 15.0198 13.9017L15.0748 13.7917C15.1573 13.6248 15.1974 13.4402 15.1916 13.2542C15.1857 13.0682 15.1342 12.8864 15.0415 12.725C14.9848 12.61 13.9582 10.1334 13.8498 9.87337C13.5865 9.24504 13.2398 8.95337 12.7582 8.95337C12.7132 8.95337 12.7582 8.95337 12.5715 8.9617C12.3432 8.97004 11.0998 9.13504 10.5498 9.48004C9.96649 9.8467 8.98315 11.02 8.98315 13.08C8.98315 14.9334 10.1582 16.6834 10.6632 17.3484L10.7315 17.4484C12.6665 20.2734 15.0782 22.3667 17.5215 23.3434C19.8748 24.2834 20.9898 24.3934 21.6232 24.3934C21.8898 24.3934 22.1032 24.3717 22.2898 24.3534L22.4098 24.3417C23.2232 24.27 25.0098 23.3434 25.4165 22.215C25.7365 21.325 25.8215 20.3534 25.6082 20C25.4615 19.76 25.2098 19.64 24.8915 19.4867Z"
                      fill="#DEDEDE"
                    />
                  </svg>
                </a>
              )}
              {data?.instagram && (
                <a
                  href={data?.instagram}
                  className="social-media-icon flex items-center gap-2"
                >
                  <svg
                    width="34"
                    height="34"
                    viewBox="0 0 34 34"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M17.0016 11.9999C15.6755 11.9999 14.4037 12.5267 13.4661 13.4644C12.5284 14.4021 12.0016 15.6738 12.0016 16.9999C12.0016 18.326 12.5284 19.5978 13.4661 20.5355C14.4037 21.4731 15.6755 21.9999 17.0016 21.9999C18.3277 21.9999 19.5994 21.4731 20.5371 20.5355C21.4748 19.5978 22.0016 18.326 22.0016 16.9999C22.0016 15.6738 21.4748 14.4021 20.5371 13.4644C19.5994 12.5267 18.3277 11.9999 17.0016 11.9999ZM17.0016 8.66658C19.2117 8.66658 21.3313 9.54456 22.8941 11.1074C24.4569 12.6702 25.3349 14.7898 25.3349 16.9999C25.3349 19.2101 24.4569 21.3297 22.8941 22.8925C21.3313 24.4553 19.2117 25.3333 17.0016 25.3333C14.7914 25.3333 12.6718 24.4553 11.109 22.8925C9.54623 21.3297 8.66825 19.2101 8.66825 16.9999C8.66825 14.7898 9.54623 12.6702 11.109 11.1074C12.6718 9.54456 14.7914 8.66658 17.0016 8.66658ZM27.8349 8.24992C27.8349 8.80245 27.6154 9.33236 27.2247 9.72306C26.834 10.1138 26.3041 10.3333 25.7516 10.3333C25.199 10.3333 24.6691 10.1138 24.2784 9.72306C23.8877 9.33236 23.6683 8.80245 23.6683 8.24992C23.6683 7.69738 23.8877 7.16748 24.2784 6.77678C24.6691 6.38608 25.199 6.16658 25.7516 6.16658C26.3041 6.16658 26.834 6.38608 27.2247 6.77678C27.6154 7.16748 27.8349 7.69738 27.8349 8.24992ZM17.0016 3.66659C12.8783 3.66659 12.2049 3.67825 10.2866 3.76325C8.97992 3.82492 8.10325 3.99992 7.28992 4.31659C6.60964 4.5672 5.99445 4.96764 5.48992 5.48825C4.96871 5.99262 4.56769 6.60782 4.31659 7.28825C3.99992 8.10492 3.82492 8.97992 3.76492 10.2849C3.67825 12.1249 3.66659 12.7683 3.66659 16.9999C3.66659 21.1249 3.67825 21.7966 3.76325 23.7149C3.82492 25.0199 3.99992 25.8983 4.31492 26.7099C4.59825 27.4349 4.93159 27.9566 5.48492 28.5099C6.04659 29.0699 6.56825 29.4049 7.28492 29.6816C8.10825 29.9999 8.98492 30.1766 10.2849 30.2366C12.1249 30.3232 12.7683 30.3333 16.9999 30.3333C21.1249 30.3333 21.7966 30.3216 23.7149 30.2366C25.0182 30.1749 25.8949 29.9999 26.7099 29.6849C27.3902 29.4343 28.0054 29.0339 28.5099 28.5133C29.0716 27.9533 29.4066 27.4316 29.6833 26.7132C29.9999 25.8932 30.1766 25.0166 30.2366 23.7133C30.3232 21.8749 30.3333 21.2299 30.3333 16.9999C30.3333 12.8766 30.3216 12.2033 30.2366 10.2849C30.1749 8.98159 29.9983 8.10158 29.6833 7.28825C29.4326 6.60797 29.0322 5.99279 28.5116 5.48825C28.0072 4.96704 27.392 4.56602 26.7116 4.31492C25.8949 3.99825 25.0182 3.82325 23.7149 3.76325C21.8766 3.67659 21.2333 3.66659 16.9999 3.66659M16.9999 0.333252C21.5283 0.333252 22.0933 0.349919 23.8716 0.433252C25.6449 0.516585 26.8549 0.794919 27.9166 1.20825C29.0166 1.63159 29.9433 2.20492 30.8699 3.12992C31.7177 3.96281 32.3736 4.97071 32.7916 6.08325C33.2033 7.14492 33.4833 8.35492 33.5666 10.1299C33.6449 11.9066 33.6666 12.4716 33.6666 16.9999C33.6666 21.5283 33.6499 22.0933 33.5666 23.8699C33.4833 25.6466 33.2033 26.8533 32.7916 27.9166C32.3736 29.0291 31.7177 30.037 30.8699 30.8699C30.037 31.7177 29.0291 32.3736 27.9166 32.7916C26.8549 33.2033 25.6449 33.4833 23.8716 33.5666C22.0933 33.6449 21.5283 33.6666 16.9999 33.6666C12.4716 33.6666 11.9066 33.6499 10.1283 33.5666C8.35492 33.4833 7.14658 33.2033 6.08325 32.7916C4.97071 32.3736 3.96281 31.7177 3.12992 30.8699C2.2821 30.037 1.62628 29.0291 1.20825 27.9166C0.794919 26.8549 0.516585 25.6449 0.433252 23.8699C0.353252 22.0933 0.333252 21.5283 0.333252 16.9999C0.333252 12.4716 0.349919 11.9066 0.433252 10.1299C0.516585 8.35325 0.794919 7.14658 1.20825 6.08325C1.62628 4.97071 2.2821 3.96281 3.12992 3.12992C3.96281 2.2821 4.97071 1.62628 6.08325 1.20825C7.14492 0.794919 8.35325 0.516585 10.1283 0.433252C11.9083 0.354919 12.4733 0.333252 17.0016 0.333252"
                      fill="#DEDEDE"
                    />
                  </svg>
                </a>
              )}
              {data?.facebook && (
                <a
                  href={data?.facebook}
                  className="social-media-icon flex items-center gap-2"
                >
                  <svg
                    width="17"
                    height="32"
                    viewBox="0 0 17 32"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M11.0832 18.2855H14.8927L16.4165 12.1903H11.0832V9.14267C11.0832 7.57315 11.0832 6.09505 14.1308 6.09505H16.4165V0.975052C15.9197 0.909528 14.0439 0.761719 12.063 0.761719C7.92584 0.761719 4.98793 3.28667 4.98793 7.92362V12.1903H0.416504V18.2855H4.98793V31.2379H11.0832V18.2855Z"
                      fill="#DEDEDE"
                    />
                  </svg>
                </a>
              )}
              {data?.behance && (
                <a
                  href={data?.behance}
                  className="social-media-icon flex items-center gap-2"
                >
                  <svg
                    width="34"
                    height="22"
                    viewBox="0 0 34 22"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M13.8283 9.87167C14.7416 9.495 15.4416 8.905 15.8716 8.205C16.3016 7.505 16.5699 6.59167 16.5699 5.62334C16.5699 4.71 16.4083 3.90334 16.1399 3.205C15.8166 2.505 15.3866 1.96834 14.7949 1.59167C14.1755 1.17722 13.4825 0.885286 12.7533 0.73167C11.883 0.57792 11.0003 0.50594 10.1166 0.516669H0.333252V20.9467H10.2799C11.1933 20.9467 12.1083 20.8933 12.9133 20.57C13.7637 20.3664 14.5671 20.0015 15.2799 19.495C15.9799 19.065 16.5166 18.42 16.8916 17.6133C17.2683 16.86 17.4833 15.9467 17.4833 14.8717C17.4833 13.5817 17.1616 12.4517 16.5699 11.5917C15.9249 10.8383 15.0099 10.2483 13.8283 9.87167ZM4.90325 4.065H9.14992C9.52658 4.065 9.90325 4.11834 10.2799 4.11834C10.6566 4.11834 11.0316 4.335 11.2466 4.495C11.5681 4.64683 11.8187 4.9166 11.9466 5.24834C12.1083 5.57 12.1616 5.94667 12.1616 6.485C12.1616 7.29 11.9449 7.99 11.4083 8.36667C10.8052 8.71973 10.1187 8.90502 9.41992 8.90334H4.90325V4.065ZM12.7533 16.1617C12.5916 16.5383 12.3766 16.7533 11.9999 16.9683C11.6766 17.1833 11.2999 17.345 10.9249 17.345C10.5483 17.3983 10.1183 17.3983 9.68825 17.3983H4.84992V11.86H9.79492C10.7633 11.86 11.5166 12.0767 12.1616 12.56C12.7533 12.99 13.0749 13.7967 13.0749 14.8183C12.9683 15.355 12.9683 15.785 12.7533 16.1617ZM33.3449 11.3233C33.1283 10.2483 32.6449 9.33334 32.0533 8.52667C31.446 7.71492 30.677 7.03789 29.7949 6.53834C28.7705 6.05024 27.6513 5.79307 26.5166 5.785C25.3866 5.785 24.3116 6.00167 23.5049 6.37667C22.5862 6.74799 21.7606 7.31701 21.0866 8.04334C20.3866 8.74334 19.8499 9.54834 19.4733 10.5167C19.0783 11.5081 18.8774 12.5661 18.8816 13.6333C18.8816 14.7633 19.0433 15.8383 19.4199 16.8067C19.7949 17.7733 20.3333 18.5267 20.9249 19.28C21.6249 19.98 22.3749 20.5167 23.3433 20.8933C24.3524 21.2955 25.4304 21.4965 26.5166 21.485C28.1833 21.485 29.6333 21.1083 30.8166 20.355C32.0533 19.6033 32.8599 18.3117 33.4516 16.485H29.9016C29.7416 16.915 29.3649 17.3983 28.8283 17.775C28.2899 18.1517 27.5383 18.3667 26.7316 18.3667C25.6016 18.3667 24.6883 18.0433 24.0983 17.4517C23.5049 16.86 23.1283 15.7317 23.1283 14.5483H33.6666C33.6666 13.42 33.6149 12.29 33.3449 11.3233ZM22.9116 12.0233C22.9116 11.645 23.0733 11.2683 23.1816 10.9467C23.3416 10.57 23.5033 10.1933 23.7716 9.925C24.0949 9.60167 24.5249 9.28 24.9549 9.065C25.3849 8.84834 25.9216 8.84834 26.4066 8.84834C27.3732 8.84834 28.2349 9.17167 28.6649 9.65667C29.0949 10.1933 29.4716 10.9467 29.5783 12.0233H22.9116ZM30.3866 1.915H22.0533V3.95667H30.3866V1.915Z"
                      fill="#DEDEDE"
                    />
                  </svg>
                </a>
              )}
              <a
                href="#"
                className="social-media-icon flex items-center gap-2 w-full content-text-bold text-gray-200"
              >
                {data?.email}
              </a>
            </div>
          </div>
          <div className="w-1/2">
            <form
              className="flex gap-6 flex-col"
              onSubmit={handleSubmit(onSubmit)}
              ref={form}
            >
              <input
                type="text"
                placeholder="Nome"
                {...register("nome", { required: true })}
                className={`w-full block px-6 py-2 rounded ${
                  errors.nome && "input-error"
                }`}
              />
              <input
                type="e-mail"
                placeholder="E-mail"
                {...register("email", {
                  required: true,
                  pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/i,
                })}
                className={`w-full block px-6 py-2 rounded ${
                  errors.email && "input-error"
                }`}
              />
              <textarea
                placeholder="Mensagem"
                {...register("mensagem", { required: true })}
                className={`w-full block px-6 py-2 rounded ${
                  errors.mensagem && "input-error"
                }`}
                rows={11}
              ></textarea>
              <div className="flex items-center">
                <div className="consent-box flex items-center gap-5 w-3/4">
                  <input
                    type="checkbox"
                    className={`rounded ${errors.consent && "input-error"}`}
                    {...register("consent", { required: true })}
                  />
                  <label
                    className="text-sm content-caption text-white-70"
                    htmlFor="input-consent"
                  >
                    Etiam non diam sit amet enim euismod blandit luctus lacinia
                    lorem. Vestibulum ultricies est turpis, ut pulvinar lorem
                    tempor a.
                  </label>
                </div>
                <div className="flex flex-wrap items-center justify-end w-1/4">
                  <button
                    type="submit"
                    className="btn px-8 py-3 text-gray-700 bg-primary uppercase button-md rounded"
                  >
                    Enviar
                  </button>
                </div>
              </div>
              {Object.keys(errors).length > 0 && (
                <p className="block w-full error-message">
                  Por favor, preencha todos os campos corretamente antes de
                  enviar.
                </p>
              )}
              {isSuccess && (
                <p className="block w-full success-message">
                  Formulário enviado com sucesso! Entraremos em contato em
                  breve.
                </p>
              )}
            </form>
          </div>
        </div>
      </div>
    </section>
  );
};

export default Contato;
